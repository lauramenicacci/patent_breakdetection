ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "right") +
ggtitle("Tennessee") #+
breaks <- c("West Virginia")
pat_plot <- pat %>%
filter(prio_year >= 2000 & prio_year <= 2019) %>%
filter(Up_reg_label %in% breaks) %>%
select(appln_id, CPC_Class, prio_year, Up_reg_label) %>%
distinct(.keep_all = TRUE)
pat_plot$CPC_Class <- pat_plot %>%  pull(CPC_Class) %>%   gsub("  ", " ", .)
pat_plot2 <- left_join(pat_plot, cpc_names, by = c("CPC_Class"))
pat_plot2 %>%
drop_na() %>%
group_by(Up_reg_label) %>%
count(Name) %>%
arrange(desc(n)) %>%
head(10) %>%
ggplot(aes(x = reorder(Name,n), y = n)) +
geom_col(fill = "076fa2") +
coord_flip() +
ylab("") + xlab("") +
facet_wrap(~Up_reg_label, scales = "free_x") +
theme_bw() +
#theme(axis.text.y = element_text(hjust = 1, size=6,color="Black")) +
ggtitle("")
breaks <- c("Virginia")
techs <- c("Nuclear fission reactors", "Energy storage using batteries", "Fuel cells")
pat_plot <- pat %>%
filter(prio_year >= 2000 & prio_year <= 2019) %>%
filter(Up_reg_label %in% breaks) %>%
select(appln_id, CPC_Class, prio_year, Up_reg_label) %>%
distinct(.keep_all = TRUE)
pat_plot$CPC_Class <- pat_plot %>%  pull(CPC_Class) %>%   gsub("  ", " ", .)
pat_plot2 <- left_join(pat_plot, cpc_names, by = c("CPC_Class"))
pat_plot2 %>%
drop_na() %>%
group_by(Up_reg_label) %>%
count(Name) %>%
arrange(desc(n)) %>%
head(10) %>%
ggplot(aes(x = reorder(Name,n), y = n)) +
geom_col(fill = "076fa2") +
coord_flip() +
ylab("") + xlab("") +
facet_wrap(~Up_reg_label, scales = "free_x") +
theme_bw() +
#theme(axis.text.y = element_text(hjust = 1, size=6,color="Black")) +
ggtitle("")
breaks <- c("Kentucky")
techs <- c("Biofuels, e.g. bio-diesel", "Energy storage using batteries","Fuel cells", "Nuclear fission reactors", "Enabling technologies; Technologies with a potential or indirect contribution to GHG emissions mitigation")
pat_plot <- pat %>%
filter(prio_year >= 2000 & prio_year <= 2019) %>%
filter(Up_reg_label %in% breaks) %>%
select(appln_id, CPC_Class, prio_year, Up_reg_label) %>%
distinct(.keep_all = TRUE)
pat_plot$CPC_Class <- pat_plot %>%  pull(CPC_Class) %>%   gsub("  ", " ", .)
pat_plot2 <- left_join(pat_plot, cpc_names, by = c("CPC_Class"))
pat_plot2 %>%
drop_na() %>%
group_by(Up_reg_label) %>%
count(Name) %>%
arrange(desc(n)) %>%
head(10) %>%
ggplot(aes(x = reorder(Name,n), y = n)) +
geom_col(fill = "076fa2") +
coord_flip() +
ylab("") + xlab("") +
facet_wrap(~Up_reg_label, scales = "free_x") +
theme_bw() +
#theme(axis.text.y = element_text(hjust = 1, size=6,color="Black")) +
ggtitle("")
breaks <- c("Kentucky")
techs <- c("Biofuels, e.g. bio-diesel", "Energy storage using batteries","Fuel cells", "Photovoltaic [PV] energy", "Energy storage using capacitors")
pat_plot <- pat %>%
filter(prio_year >= 2000 & prio_year <= 2019) %>%
filter(Up_reg_label %in% breaks) %>%
select(appln_id, CPC_Class, prio_year, Up_reg_label) %>%
distinct(.keep_all = TRUE)
pat_plot$CPC_Class <- pat_plot %>%  pull(CPC_Class) %>%   gsub("  ", " ", .)
pat_plot2 <- left_join(pat_plot, cpc_names, by = c("CPC_Class"))
pat_plot2 %>%
drop_na() %>%
group_by(Up_reg_label) %>%
count(Name) %>%
arrange(desc(n)) %>%
head(10) %>%
ggplot(aes(x = reorder(Name,n), y = n)) +
geom_col(fill = "076fa2") +
coord_flip() +
ylab("") + xlab("") +
facet_wrap(~Up_reg_label, scales = "free_x") +
theme_bw() +
#theme(axis.text.y = element_text(hjust = 1, size=6,color="Black")) +
ggtitle("")
pat_plot2 %>%
filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "right") +
ggtitle("Kentucky") #+
scale_fill_simpsons(palette = c("springfield"))
#data_change <- data_change %>%
#  filter(year %in% c(2010,2019)) %>%
#  group_by(ISO,country) %>%
#  mutate(change_abs = last(GHG)-first(GHG),               ## absolute change, or the difference in emissions between t2 and t1
#         change_rel = change_abs/first(GHG),              ## relative change, or the ratio of absolute change to emissions in t1
#         change_avg_annual = ((last(GHG)/first(GHG))^(1/(2019-2010))-1)) ## average annual change using the CGAR formula
breaks <- c("Kentucky")
techs <- c("Biofuels, e.g. bio-diesel", "Energy storage using batteries","Fuel cells", "Photovoltaic [PV] energy", "Energy storage using capacitors")
pat_plot <- pat %>%
filter(prio_year >= 2000 & prio_year <= 2019) %>%
filter(Up_reg_label %in% breaks) %>%
select(appln_id, CPC_Class, prio_year, Up_reg_label) %>%
distinct(.keep_all = TRUE)
pat_plot$CPC_Class <- pat_plot %>%  pull(CPC_Class) %>%   gsub("  ", " ", .)
pat_plot2 <- left_join(pat_plot, cpc_names, by = c("CPC_Class"))
pat_plot2 %>%
drop_na() %>%
group_by(Up_reg_label) %>%
count(Name) %>%
arrange(desc(n)) %>%
head(10) %>%
ggplot(aes(x = reorder(Name,n), y = n)) +
geom_col(fill = "076fa2") +
coord_flip() +
ylab("") + xlab("") +
facet_wrap(~Up_reg_label, scales = "free_x") +
theme_bw() +
#theme(axis.text.y = element_text(hjust = 1, size=6,color="Black")) +
ggtitle("")
pat_plot2 %>%
filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "right") +
ggtitle("Kentucky") +
scale_fill_simpsons(palette = c("springfield"))
#data_change <- data_change %>%
#  filter(year %in% c(2010,2019)) %>%
#  group_by(ISO,country) %>%
#  mutate(change_abs = last(GHG)-first(GHG),               ## absolute change, or the difference in emissions between t2 and t1
#         change_rel = change_abs/first(GHG),              ## relative change, or the ratio of absolute change to emissions in t1
#         change_avg_annual = ((last(GHG)/first(GHG))^(1/(2019-2010))-1)) ## average annual change using the CGAR formula
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
policy <- read_csv("D:\\policy_database\\program_new.csv") %>%
select(!c(administrator, fromSir, additional_technologies))
state_info <- read_csv("D:\\policy_database\\state.csv")  %>%
select(!c(is_territory))
authority <- read_csv("D:\\policy_database\\authority.csv") %>%
select(!c(order,code, file_key, file_name, id, website, expired, expiredtext)) %>%
filter(if_any(c(effective, effectivetext), complete.cases)) %>%
distinct()
type <- read_csv("D:\\policy_database\\program_type.csv")
policy1 <- left_join(policy, type, by = c("program_type_id" = "id")) %>%
rename("policy_type" = "name.y",
"name" = "name.x") %>%
select(!c(program_category_id.y))
policy2 <- left_join(policy1, state_info, by = c("state_id" = "id")) %>% # join policy data + state data
rename("state_name" = "name.y",
"state_code" = "abbreviation",
"policy_id" = "id",
"policy_name" = "name.x",
"program_category" = "program_category_id.x") %>%
select(policy_id, state_name, state_code, policy_name, summary, policy_type, program_category, published, websiteurl, start_date, start_date_text)
policy2$start_year <- policy2 %>%
pull(start_date) %>%
year()
policy2 <- policy2 %>%
select(!c(start_date))
policy2$program_category <- ifelse(policy2$program_category == 1, "Financial Incentive", "Regulatory Policy")
write_csv(policy2, ".\\policy_dataset1.csv")
View(policy2)
pat_plot2 %>%
#filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Kentucky")
financial_df = as.data.frame(table(policy2[policy2$program_category == 'Financial Incentive', ]$policy_type))
library(treemapify)
ggplot(financial_df, aes(area = Freq, fill = Freq, label = Var1)) +
geom_treemap() +
geom_treemap_text(colour = "white",
place = "centre",
size = 15) +  ggtitle("FINANCIAL INCENTIVE POLICIES TYPES")
ggplot(financial_df, aes(area = Freq, fill = Freq, label = Var1)) +
geom_treemap() +
geom_treemap_text(colour = "white",
place = "centre",
size = 15) +  ggtitle("Financial incentive policy types")
View(financial_df)
policy2 %>%
filter(state_name %in% tn_neighbours) %>%
ggplot(aes(x = year, fill = policy_type)) +
geom_bar()
tn_neighbours <- c("Missouri", "Arkansas", "Mississippi", "Alabama", "Georgia", "North Carolina", "Virginia", "Kentucky")
ky_neigh <- c("Indiana", "Ohio", "Illinois", "West Virginia", "North Carolina", "Virginia","Missouri","Tennessee")
sc_neigh <- c("North Carolina", "Georgia", "Tennessee")
dc_neigh <- c("Virginia", "Delaware", "West Virginia", "Pennysilvania")
wi_neigh <- c("Michigan", "Minnesota", "Iowa", "Illinois", "Indiana")
policy2 %>%
filter(state_name %in% tn_neighbours) %>%
ggplot(aes(x = year, fill = policy_type)) +
geom_bar()
policy2 %>%
filter(state_name %in% tn_neighbours) %>%
ggplot(aes(x = start_year, fill = policy_type)) +
geom_bar()
policy2 %>%
filter(state_name %in% tn_neighbours) %>%
ggplot(aes(x = start_year, fill = policy_type)) +
geom_bar() +
theme(legend.position = "none")
policy2 %>%
filter(start_year <= 2010)
policy2 %>%
filter(start_year <= 2010) %>%
filter(state_name %in% tn_neighbours) %>%
ggplot(aes(x = start_year, fill = policy_type)) +
geom_bar() +
theme(legend.position = "none")
policy2 %>%
filter(start_year <= 2010) %>%
filter(state_name %in% tn_neighbours) %>%
ggplot(aes(x = start_year, fill = policy_type)) +
geom_bar() +
theme(legend.position = "right")
policy2 %>%
filter(start_year <= 2010) %>%
filter(state_name %in% tn_neighbours)
policy2 %>%
filter(start_year <= 2010) %>%
filter(state_name %in% ky_neighbours)
tn_neigh <- c("Missouri", "Arkansas", "Mississippi", "Alabama", "Georgia", "North Carolina", "Virginia", "Kentucky")
ky_neigh <- c("Indiana", "Ohio", "Illinois", "West Virginia", "North Carolina", "Virginia","Missouri","Tennessee")
sc_neigh <- c("North Carolina", "Georgia", "Tennessee")
dc_neigh <- c("Virginia", "Delaware", "West Virginia", "Pennysilvania")
wi_neigh <- c("Michigan", "Minnesota", "Iowa", "Illinois", "Indiana")
policy2 %>%
filter(start_year <= 2010) %>%
filter(state_name %in% ky_neigh) %>%
ggplot(aes(x = start_year, fill = policy_type)) +
geom_bar() +
theme(legend.position = "right")
policy2 %>%
filter(start_year <= 2012 & start_year >= 2002) %>%
filter(state_name %in% ky_neigh) %>%
ggplot(aes(x = start_year, fill = policy_type)) +
geom_bar() +
theme(legend.position = "right")
policy2 %>%
filter(start_year <= 2012 & start_year >= 2002) %>%
filter(state_name %in% ky_neigh)
pat_plot2 %>%
#filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "right") +
ggtitle("Kentucky")
pat_plot2 %>%
#filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Kentucky")
pat_plot2 %>%
#filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Kentucky") +
coord_flip()
pat_plot2 %>%
#filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "right") +
ggtitle("Kentucky") +
coord_flip()
pat_plot2 %>%
#filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Kentucky") +
coord_flip()
pat_plot2 %>%
filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Kentucky") +
coord_flip()
pat_plot2 %>%
#filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Kentucky") +
coord_flip()
pat_plot2 %>%
#filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Kentucky") +
coord_flip()
scale_fill_simpsons(palette = c("springfield"))
pat_plot2 %>%
filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Kentucky") +
coord_flip()
pat_plot2 %>%
#filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Kentucky") +
coord_flip()
scale_fill_simpsons(palette = c("springfield"))
pat_plot2 %>%
filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "right") +
ggtitle("Kentucky") +
coord_flip()
policy2 %>%
filter(start_year <= 2012 & start_year >= 2002) %>%
filter(state_name %in% sc_neigh)
policy2 %>%
#filter(start_year <= 2012 & start_year >= 2002) %>%
filter(state_name %in% sc_neigh)
policy2 %>%
#filter(start_year <= 2012 & start_year >= 2002) %>%
filter(state_name %in% ky_neigh)
policy2 %>% filter(policy_name == "ODOD - Advanced Energy Program Grants - Non-Residential Renewable Energy Incentive")
policy2 %>% filter(policy_name == "ODOD - Advanced Energy Program Grants - Non-Residential Renewable Energy Incentive") %>% pull(summary)
policy2 %>% filter(policy_name == "Advanced Energy Fund") %>% pull(summary)
View(authority)
policy2 %>% filter(policy_name == "Wind Energy Production Development Program") %>% pull(summary)
policy2 %>% filter(policy_name == "Advanced Energy Fund") %>% pull(summary)
policy2 %>% filter(policy_name == "Model Wind Ordinance") %>% pull(summary)
policy2 %>%
#filter(start_year <= 2012 & start_year >= 2002) %>%
filter(state_name %in% wi_neigh) %>%
ggplot(aes(x = start_year, fill = policy_type)) +
geom_bar() +
theme(legend.position = "right")
policy2 %>%
#filter(start_year <= 2012 & start_year >= 2002) %>%
filter(state_name %in% wi_neigh)
wi_neigh <- c("Michigan", "Minnesota", "Iowa")
policy2 %>%
#filter(start_year <= 2012 & start_year >= 2002) %>%
filter(state_name %in% wi_neigh) %>%
ggplot(aes(x = start_year, fill = policy_type)) +
geom_bar() +
theme(legend.position = "right")
policy2 %>%
#filter(start_year <= 2012 & start_year >= 2002) %>%
filter(state_name %in% wi_neigh)
wi_neigh <- c("Michigan", "Minnesota")
policy2 %>%
#filter(start_year <= 2012 & start_year >= 2002) %>%
filter(state_name %in% wi_neigh)
pat_plot2 %>%
filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Wisconsin - patents by top 5 technology") #+
breaks <- c("Wisconsin")
techs <- c("Biofuels, e.g. bio-diesel", "Energy storage using batteries","Fuel cells", "Fuel from waste, e.g. synthetic alcohol or diesel", "Power conversion systems, e.g. maximum power point trackers")
pat_plot <- pat %>%
filter(prio_year >= 2000 & prio_year <= 2019) %>%
filter(Up_reg_label %in% breaks) %>%
select(appln_id, CPC_Class, prio_year, Up_reg_label) %>%
distinct(.keep_all = TRUE)
pat_plot$CPC_Class <- pat_plot %>%  pull(CPC_Class) %>%   gsub("  ", " ", .)
pat_plot2 <- left_join(pat_plot, cpc_names, by = c("CPC_Class"))
pat_plot2 %>%
drop_na() %>%
group_by(Up_reg_label) %>%
count(Name) %>%
arrange(desc(n)) %>%
head(10) %>%
ggplot(aes(x = reorder(Name,n), y = n)) +
geom_col(fill = "076fa2") +
coord_flip() +
ylab("") + xlab("") +
facet_wrap(~Up_reg_label, scales = "free_x") +
theme_bw() +
#theme(axis.text.y = element_text(hjust = 1, size=6,color="Black")) +
ggtitle("")
pat_plot2 %>%
filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Wisconsin - patents by top 5 technology") #+
scale_fill_simpsons(palette = c("springfield"))
breaks <- c("Wisconsin")
techs <- c("Biofuels, e.g. bio-diesel", "Energy storage using batteries","Fuel cells", "Fuel from waste, e.g. synthetic alcohol or diesel", "Power conversion systems, e.g. maximum power point trackers")
pat_plot <- pat %>%
filter(prio_year >= 2000 & prio_year <= 2019) %>%
filter(Up_reg_label %in% breaks) %>%
select(appln_id, CPC_Class, prio_year, Up_reg_label) %>%
distinct(.keep_all = TRUE)
pat_plot$CPC_Class <- pat_plot %>%  pull(CPC_Class) %>%   gsub("  ", " ", .)
pat_plot2 <- left_join(pat_plot, cpc_names, by = c("CPC_Class"))
pat_plot2 %>%
drop_na() %>%
group_by(Up_reg_label) %>%
count(Name) %>%
arrange(desc(n)) %>%
head(10) %>%
ggplot(aes(x = reorder(Name,n), y = n)) +
geom_col(fill = "076fa2") +
coord_flip() +
ylab("") + xlab("") +
facet_wrap(~Up_reg_label, scales = "free_x") +
theme_bw() +
#theme(axis.text.y = element_text(hjust = 1, size=6,color="Black")) +
ggtitle("")
pat_plot2 %>%
filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "none") +
ggtitle("Wisconsin - patents by top 5 technology") +
scale_fill_simpsons(palette = c("springfield"))
breaks <- c("Wisconsin")
techs <- c("Biofuels, e.g. bio-diesel", "Energy storage using batteries","Fuel cells", "Fuel from waste, e.g. synthetic alcohol or diesel", "Power conversion systems, e.g. maximum power point trackers")
pat_plot <- pat %>%
filter(prio_year >= 2000 & prio_year <= 2019) %>%
filter(Up_reg_label %in% breaks) %>%
select(appln_id, CPC_Class, prio_year, Up_reg_label) %>%
distinct(.keep_all = TRUE)
pat_plot$CPC_Class <- pat_plot %>%  pull(CPC_Class) %>%   gsub("  ", " ", .)
pat_plot2 <- left_join(pat_plot, cpc_names, by = c("CPC_Class"))
pat_plot2 %>%
drop_na() %>%
group_by(Up_reg_label) %>%
count(Name) %>%
arrange(desc(n)) %>%
head(10) %>%
ggplot(aes(x = reorder(Name,n), y = n)) +
geom_col(fill = "076fa2") +
coord_flip() +
ylab("") + xlab("") +
facet_wrap(~Up_reg_label, scales = "free_x") +
theme_bw() +
#theme(axis.text.y = element_text(hjust = 1, size=6,color="Black")) +
ggtitle("")
pat_plot2 %>%
filter(Name %in% techs) %>%
ggplot(aes(x = prio_year, fill = Name)) +
geom_bar() +
ylab("") + xlab("") +
theme_bw() +
theme(legend.position = "right") +
ggtitle("Wisconsin - patents by top 5 technology") +
scale_fill_simpsons(palette = c("springfield"))
policy2 %>%
filter(start_year >= 2007) %>%
filter(state_name %in% wi_neigh)
policy2 %>%
filter(state_name %in% wi_neigh)
policy2 %>% filter(policy_name == "Michigan Accelerating Technologies (MATch) Energy Grant") %>% pull(summary)
